<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„ ìƒë‹˜ê³¼ í•™ìƒì„ ìœ„í•œ ë§ˆìŒ ì‰¼í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Noto+Sans+KR:wght@300;400;500&display=swap');

        body {
            font-family: 'Gowun Batang', serif; /* ê°ì„±ì ì¸ ëª…ì¡°ì²´ */
        }

        /* ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */
        .bg-animate {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        
        /* ë” ì°¨ë¶„í•œ ë°¤ ë²„ì „ ë°°ê²½ */
        .bg-calm {
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #0f172a 100%);
            color: #e2e8f0;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* í˜¸í¡ ì› ì• ë‹ˆë©”ì´ì…˜ */
        .breathe-circle {
            animation: breathe 8s infinite ease-in-out;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.5); opacity: 0.3; }
        }

        /* ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ ì¹´ë“œ */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        .fade-in {
            animation: fadeIn 2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì»¤ìŠ¤í…€ */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            margin-top: -6px; 
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }
    </style>
</head>
<body class="bg-calm min-h-screen flex items-center justify-center overflow-hidden transition-colors duration-1000" id="mainBody">

    <!-- ë³„ ë°°ê²½ íš¨ê³¼ (CSSë¡œ ìƒì„±) -->
    <div class="fixed inset-0 pointer-events-none opacity-50" id="stars"></div>

    <div class="relative w-full max-w-2xl px-4 py-8 z-10">
        
        <!-- ë©”ì¸ ì¹´ë“œ -->
        <div class="glass-card rounded-3xl p-8 text-center relative overflow-hidden">
            
            <!-- ìƒë‹¨ ë¬¸êµ¬ -->
            <header class="mb-10 fade-in">
                <h1 class="text-3xl md:text-4xl font-bold mb-3 text-white tracking-widest">ë§ˆìŒ ì‰¼í„°</h1>
                <p class="text-slate-300 text-sm md:text-base font-light">
                    ì„ ìƒë‹˜, ê·¸ë¦¬ê³  í•™ìƒ ì—¬ëŸ¬ë¶„.<br>
                    ì¹˜ì—´í–ˆë˜ í•˜ë£¨ë¥¼ ì ì‹œ ë‚´ë ¤ë†“ê³  ì˜¨ì „íˆ ë‚˜ë¥¼ ë§ˆì£¼í•˜ì„¸ìš”.
                </p>
            </header>

            <!-- í˜¸í¡ ê°€ì´ë“œ ì„¹ì…˜ -->
            <div class="relative h-64 flex items-center justify-center mb-10">
                <div class="absolute w-40 h-40 bg-indigo-400 rounded-full blur-2xl breathe-circle mix-blend-screen"></div>
                <div class="absolute w-32 h-32 bg-purple-400 rounded-full blur-xl breathe-circle delay-100 mix-blend-screen" style="animation-delay: -2s;"></div>
                
                <div class="relative z-10 text-white text-center">
                    <p id="breathText" class="text-xl font-medium tracking-widest opacity-90 transition-all duration-1000">
                        ë“¤ì´ë§ˆì„¸ìš”...
                    </p>
                </div>
            </div>

            <!-- ìœ„ë¡œì˜ ë©”ì‹œì§€ ë¡¤ë§ -->
            <div class="h-20 flex items-center justify-center mb-8">
                <p id="healingMessage" class="text-lg md:text-xl text-white font-light italic transition-opacity duration-1000 opacity-100 px-4 leading-relaxed">
                    "ì˜¤ëŠ˜ í•˜ë£¨ë„ ì¶©ë¶„íˆ ì˜í•´ëƒˆìŠµë‹ˆë‹¤."
                </p>
            </div>

            <!-- ëª…ìƒ íƒ€ì´ë¨¸ & ì»¨íŠ¸ë¡¤ -->
            <div class="flex flex-col items-center gap-6">
                <!-- íƒ€ì´ë¨¸ ë””ìŠ¤í”Œë ˆì´ -->
                <div id="timerDisplay" class="text-4xl font-mono text-white font-thin hidden">00:00</div>
                
                <div class="flex gap-3">
                    <button onclick="setTimer(1)" class="px-4 py-2 rounded-full border border-white/30 text-white hover:bg-white/20 transition text-sm">1ë¶„ ëª…ìƒ</button>
                    <button onclick="setTimer(3)" class="px-4 py-2 rounded-full border border-white/30 text-white hover:bg-white/20 transition text-sm">3ë¶„ ëª…ìƒ</button>
                    <button onclick="setTimer(5)" class="px-4 py-2 rounded-full border border-white/30 text-white hover:bg-white/20 transition text-sm">5ë¶„ ëª…ìƒ</button>
                    <button onclick="stopTimer()" id="stopBtn" class="px-4 py-2 rounded-full bg-rose-500/20 text-rose-200 border border-rose-500/30 hover:bg-rose-500/30 transition text-sm hidden">ë©ˆì¶¤</button>
                </div>
            </div>

            <!-- ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ -->
            <div class="mt-10 pt-6 border-t border-white/10">
                <div class="flex items-center justify-between gap-4 bg-black/20 rounded-xl p-4">
                    <button id="playPauseBtn" class="w-10 h-10 flex items-center justify-center rounded-full bg-white/20 hover:bg-white/30 text-white transition">
                        <i class="fas fa-play ml-1" id="playIcon"></i>
                    </button>
                    
                    <div class="flex-1">
                        <p class="text-xs text-slate-400 mb-1" id="musicTitle">ì”ì”í•œ í”¼ì•„ë…¸ ì„ ìœ¨</p>
                        <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="0.5" class="w-full h-1 bg-white/20 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <button onclick="openMusicModal()" class="text-xs text-slate-400 hover:text-white underline decoration-dotted underline-offset-4">
                        ìŒì•… ë³€ê²½
                    </button>
                </div>
            </div>

        </div>

        <footer class="text-center mt-6 text-slate-500 text-xs font-light">
            Â© For Teachers & Students. Healing Space.
        </footer>
    </div>

    <!-- ìŒì•… ë§í¬ ì…ë ¥ ëª¨ë‹¬ -->
    <div id="musicModal" class="fixed inset-0 bg-black/80 z-50 hidden flex items-center justify-center backdrop-blur-sm">
        <div class="bg-slate-800 p-6 rounded-2xl w-11/12 max-w-md border border-slate-700 shadow-2xl">
            <h3 class="text-white text-lg font-bold mb-4">ë°°ê²½ ìŒì•… ì„¤ì •</h3>
            
            <!-- ì¶”ì²œ ìŒì•… ë¦¬ìŠ¤íŠ¸ -->
            <div class="mb-6 space-y-2">
                <p class="text-slate-400 text-xs font-semibold mb-2">ì¶”ì²œ ìŒì•… (ì„ ìƒë‹˜ì„ ìœ„í•œ íë§)</p>
                <button onclick="selectPresetMusic('https://github.com/shineonyou1274/healing/raw/4201b2ed3bb024c4c9f6b4dc5acdbdb71569d7db/%EA%B5%90%EC%82%AC%EC%9D%98%20%EC%88%A8%20%EA%B3%A0%EB%A5%B4%EA%B8%B0.mp3', 'êµì‚¬ì˜ ìˆ¨ ê³ ë¥´ê¸° 1')" 
                    class="w-full text-left px-4 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-200 text-sm transition flex items-center justify-between group">
                    <span>ğŸµ êµì‚¬ì˜ ìˆ¨ ê³ ë¥´ê¸° 1</span>
                    <i class="fas fa-play text-xs opacity-0 group-hover:opacity-100 text-indigo-400"></i>
                </button>
                <button onclick="selectPresetMusic('https://github.com/shineonyou1274/healing/raw/4201b2ed3bb024c4c9f6b4dc5acdbdb71569d7db/%EA%B5%90%EC%82%AC%EC%9D%98%20%EC%88%A8%20%EA%B3%A0%EB%A5%B4%EA%B8%B0%20(1).mp3', 'êµì‚¬ì˜ ìˆ¨ ê³ ë¥´ê¸° 2')" 
                    class="w-full text-left px-4 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-200 text-sm transition flex items-center justify-between group">
                    <span>ğŸµ êµì‚¬ì˜ ìˆ¨ ê³ ë¥´ê¸° 2</span>
                    <i class="fas fa-play text-xs opacity-0 group-hover:opacity-100 text-indigo-400"></i>
                </button>
            </div>

            <div class="border-t border-slate-700 my-4"></div>

            <p class="text-slate-400 text-sm mb-2">
                ë˜ëŠ” ì§ì ‘ ë§í¬ ì…ë ¥
            </p>
            <input type="text" id="musicUrlInput" placeholder="https://example.com/music.mp3" class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-indigo-500 mb-4">
            
            <div class="flex justify-end gap-2">
                <button onclick="closeMusicModal()" class="px-4 py-2 text-slate-300 hover:text-white text-sm">ì·¨ì†Œ</button>
                <button onclick="changeMusic()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium">ì ìš©í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ì˜¤ë””ì˜¤ ì—˜ë¦¬ë¨¼íŠ¸ (ê¸°ë³¸: êµì‚¬ì˜ ìˆ¨ ê³ ë¥´ê¸° 1) -->
    <audio id="audioPlayer" loop>
        <source src="https://github.com/shineonyou1274/healing/raw/4201b2ed3bb024c4c9f6b4dc5acdbdb71569d7db/%EA%B5%90%EC%82%AC%EC%9D%98%20%EC%88%A8%20%EA%B3%A0%EB%A5%B4%EA%B8%B0.mp3" type="audio/mpeg">
        ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </audio>

    <script>
        // --- 1. í˜¸í¡ í…ìŠ¤íŠ¸ ê°€ì´ë“œ ---
        const breathText = document.getElementById('breathText');
        const phrases = [
            { text: "ê¹Šê²Œ ë“¤ì´ë§ˆì‹œì„¸ìš”...", time: 4000 },
            { text: "ì ì‹œ ë©ˆì¶”ì„¸ìš”...", time: 2000 },
            { text: "ì²œì²œíˆ ë‚´ì‰¬ì„¸ìš”...", time: 6000 }
        ];

        let phraseIndex = 0;

        function updateBreathGuide() {
            // ì‚¬ì´í´ ë°˜ë³µì„ ìœ„í•´ ì¬ê·€ì  í˜¸ì¶œì´ë‚˜ setInterval ëŒ€ì‹ 
            // CSS ì• ë‹ˆë©”ì´ì…˜(8ì´ˆ)ì— ë§ì¶° í…ìŠ¤íŠ¸ íƒ€ì´ë° ì¡°ì ˆ
            // ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ 4ì´ˆ(ë“¤ìˆ¨)/4ì´ˆ(ë‚ ìˆ¨) ì£¼ê¸°ë¡œ í…ìŠ¤íŠ¸ ë³€ê²½
            
            setInterval(() => {
                breathText.style.opacity = 0;
                setTimeout(() => {
                    breathText.innerText = "ê¹Šê²Œ ë“¤ì´ë§ˆì‹œì„¸ìš”...";
                    breathText.style.opacity = 0.9;
                }, 1000);

                setTimeout(() => {
                    breathText.style.opacity = 0;
                }, 3500);

                setTimeout(() => {
                    breathText.innerText = "ì²œì²œíˆ ë‚´ì‰¬ì„¸ìš”...";
                    breathText.style.opacity = 0.9;
                }, 4500);
            }, 8000); // 8ì´ˆ ì£¼ê¸°
        }
        
        // ì´ˆê¸° ì‹¤í–‰
        updateBreathGuide();


        // --- 2. ìœ„ë¡œì˜ ë©”ì‹œì§€ ë¡¤ë§ ---
        const messages = [
            "ì˜¤ëŠ˜ í•˜ë£¨ë„ ë‹¹ì‹ ì€ ëˆ„êµ°ê°€ì—ê²Œ ë°°ì›€ì´ì—ˆê³ , í¬ë§ì´ì—ˆìŠµë‹ˆë‹¤.",
            "ì‹¤ìˆ˜í•´ë„ ê´œì°®ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ëª¨ë‘ ë°°ìš°ëŠ” ì¤‘ì´ë‹ˆê¹Œìš”.",
            "ì ì‹œ íœì„ ë†“ê³ , ì°½ë°–ì˜ í•˜ëŠ˜ì„ í•œë²ˆ ë°”ë¼ë³´ì„¸ìš”.",
            "ë‹¹ì‹ ì˜ ì—´ì •ì€ ì‹ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì ì‹œ ì‰¬ê³  ìˆì„ ë¿ì´ì—ìš”.",
            "ë¹¨ë¦¬ ê°€ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ë°©í–¥ë§Œ ë§ë‹¤ë©´ ì¶©ë¶„í•´ìš”.",
            "í•™ìƒë“¤ì˜ ëˆˆë¹› ì†ì— ë‹¹ì‹ ì˜ ì‚¬ë‘ì´ ì‹¬ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.",
            "ì„ ìƒë‹˜, ê·¸ë¦¬ê³  í•™ìƒ ì—¬ëŸ¬ë¶„. ì¡´ì¬ë§Œìœ¼ë¡œë„ ë¹›ë‚˜ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤.",
            "ë§ˆìŒì˜ ì§ì„ ì ì‹œ ë‚´ë ¤ë†“ê³ , ê·¸ì € ìˆ¨ë§Œ ì‰¬ì–´ë³´ì„¸ìš”."
        ];

        const messageEl = document.getElementById('healingMessage');
        let msgIndex = 0;

        setInterval(() => {
            messageEl.style.opacity = 0;
            setTimeout(() => {
                msgIndex = (msgIndex + 1) % messages.length;
                messageEl.innerText = `"${messages[msgIndex]}"`;
                messageEl.style.opacity = 1;
            }, 1000);
        }, 6000);


        // --- 3. ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ë¡œì§ ---
        const audio = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const volumeControl = document.getElementById('volumeControl');
        const musicModal = document.getElementById('musicModal');
        const musicUrlInput = document.getElementById('musicUrlInput');
        const musicTitle = document.getElementById('musicTitle');

        playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playIcon.className = 'fas fa-pause ml-0';
                // ë°°ê²½ì„ ì¡°ê¸ˆ ë” ëª½í™˜ì ìœ¼ë¡œ
                document.getElementById('mainBody').classList.remove('bg-calm');
                document.getElementById('mainBody').classList.add('bg-animate');
            } else {
                audio.pause();
                playIcon.className = 'fas fa-play ml-1';
                // ë°°ê²½ì„ ë‹¤ì‹œ ì°¨ë¶„í•˜ê²Œ
                document.getElementById('mainBody').classList.add('bg-calm');
                document.getElementById('mainBody').classList.remove('bg-animate');
            }
        });

        volumeControl.addEventListener('input', (e) => {
            audio.volume = e.target.value;
        });

        function openMusicModal() {
            musicModal.classList.remove('hidden');
        }

        function closeMusicModal() {
            musicModal.classList.add('hidden');
        }

        // í”„ë¦¬ì…‹ ìŒì•… ì„ íƒ í•¨ìˆ˜ ì¶”ê°€
        function selectPresetMusic(url, title) {
            audio.src = url;
            playMusic(title);
            closeMusicModal();
        }

        function changeMusic() {
            const url = musicUrlInput.value.trim();
            if (url) {
                audio.src = url;
                playMusic("ì‚¬ìš©ì ì§€ì • ìŒì•…");
                closeMusicModal();
            }
        }

        // ìŒì•… ì¬ìƒ ë° ìƒíƒœ ì—…ë°ì´íŠ¸ ê³µí†µ í•¨ìˆ˜
        function playMusic(title) {
            audio.play().catch(e => console.log("ì¬ìƒ ì˜¤ë¥˜(ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í•„ìš”):", e));
            playIcon.className = 'fas fa-pause ml-0';
            musicTitle.innerText = title;
            document.getElementById('mainBody').classList.remove('bg-calm');
            document.getElementById('mainBody').classList.add('bg-animate');
        }

        // --- 4. íƒ€ì´ë¨¸ ê¸°ëŠ¥ ---
        let timerInterval;
        const timerDisplay = document.getElementById('timerDisplay');
        const stopBtn = document.getElementById('stopBtn');

        function setTimer(minutes) {
            clearInterval(timerInterval);
            timerDisplay.classList.remove('hidden');
            stopBtn.classList.remove('hidden');
            
            let totalSeconds = minutes * 60;
            updateTimerDisplay(totalSeconds);

            // ì˜¤ë””ì˜¤ ìë™ ì¬ìƒ (íƒ€ì´ë¨¸ ì‹œì‘ ì‹œ)
            if(audio.paused) {
                audio.play();
                playIcon.className = 'fas fa-pause ml-0';
                document.getElementById('mainBody').classList.remove('bg-calm');
                document.getElementById('mainBody').classList.add('bg-animate');
            }

            timerInterval = setInterval(() => {
                totalSeconds--;
                updateTimerDisplay(totalSeconds);

                if (totalSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.innerText = "í¸ì•ˆí•œ ì‹œê°„ ë˜ì…¨ë‚˜ìš”?";
                    setTimeout(() => {
                        timerDisplay.classList.add('hidden');
                        stopBtn.classList.add('hidden');
                    }, 3000);
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            stopBtn.classList.add('hidden');
        }

        function updateTimerDisplay(seconds) {
            const m = Math.floor(seconds / 60);
            const s = seconds % 60;
            timerDisplay.innerText = `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        // --- 5. ë³„ ë°°ê²½ íš¨ê³¼ (Simple Starfield) ---
        function createStars() {
            const starContainer = document.getElementById('stars');
            const count = 50;
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                const xy = [Math.random() * 100, Math.random() * 100];
                const duration = Math.random() * 3 + 2;
                const size = Math.random() * 2 + 1;
                
                star.style.position = 'absolute';
                star.style.left = xy[0] + '%';
                star.style.top = xy[1] + '%';
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.backgroundColor = 'white';
                star.style.borderRadius = '50%';
                star.style.animation = `twinkle ${duration}s infinite ease-in-out alternate`;
                
                starContainer.appendChild(star);
            }
        }
        
        // CSS for twinkle injected dynamically or reuse breathing keyframe concept
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes twinkle {
                0% { opacity: 0.2; transform: scale(0.8); }
                100% { opacity: 0.8; transform: scale(1.2); }
            }
        `;
        document.head.appendChild(styleSheet);
        
        createStars();

    </script>
</body>
</html>
